
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Gagenkalkulator</title>

    <style>

@font-face {
    font-family: 'Montserrat';
    src: url('fonts/Montserrat-Regular.woff2') format('woff2'),
         url('fonts/Montserrat-Regular.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Bebas Neue';
    src: url('fonts/BebasNeue-Regular.woff2') format('woff2'),
         url('fonts/BebasNeue-Regular.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Courier Prime';
    src: url('fonts/CourierPrime-Regular.woff2') format('woff2'),
         url('fonts/CourierPrime-Regular.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Courier Prime';
    src: url('fonts/CourierPrime-Bold.woff2') format('woff2'),
         url('fonts/CourierPrime-Bold.woff') format('woff');
    font-weight: bold;
    font-style: normal;
}

@font-face {
    font-family: 'Courier Prime';
    src: url('fonts/CourierPrime-Italic.woff2') format('woff2'),
         url('fonts/CourierPrime-Italic.woff') format('woff');
    font-weight: normal;
    font-style: italic;
}

@font-face {
    font-family: 'Courier Prime';
    src: url('fonts/CourierPrime-BoldItalic.woff2') format('woff2'),
         url('fonts/CourierPrime-BoldItalic.woff') format('woff');
    font-weight: bold;
    font-style: italic;
}
        
        /* Allgemeine Styles */
        body {
            background-color: #000; /* Schwarz */
            color: #F4F2F0;
            font-family: 'Montserrat', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        h1, h2, h3 {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.25rem;
            color: #C8D7D2;
            letter-spacing: 2px;
            text-transform: uppercase;
            text-align: center;
            margin-top: 20vh; /* Abstand f√ºr die fixe Zone 1 */
        }

        /* Zone 1 (Logo) */
        .zone-1 {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #000;
            position: fixed;
            top: 0;
            width: 100%;
            height: 12vh;
            z-index: 1000;
        }

        /* Logo */
        .logo-container {
            height: 90%;
        }

        .logo {
            max-height: 80%;
            max-width: auto;
            height: auto;
            width: auto;
            cursor: pointer;
            transition: transform 0.3s ease-in-out;
        }

        .logo:hover {
            transform: scale(1.05);
        }

        /* Calculator Styles */
        .calculator {
            background-color: #000;
            padding: 20px;
            border-radius: 8px;
            max-width: 700px;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(255, 255, 255, 0.1);
            color: #F4F2F0;
            font-size: 1.125rem;
            line-height: 1.6;
        }

        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }

        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #444;
            border-radius: 4px;
            background-color: #222;
            color: #F4F2F0;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #C8D7D2;
        }

        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #000;
            color: #ddd;
            border: 1px solid #fff;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            font-family: 'Montserrat', sans-serif;
        }

        button:hover {
            background-color: #fff;
            color: #000;
            transform: scale(1.05);
        }

        .result, .breakdown, .parameters {
            margin-top: 20px;
            font-size: 1em;
            color: #ddd;
        }

        .breakdown, .parameters {
            background-color: #111;
            padding: 15px;
            border-radius: 8px;
        }

        .editable {
            width: 60px;
            background-color: #222;
            color: #F4F2F0;
            border: 1px solid #444;
            border-radius: 4px;
            padding: 5px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        td {
            padding: 5px;
        }

        /* Responsive Design */
        @media only screen and (max-width: 1280px) {
            h1, h2, h3 {
                font-size: 1.75rem;
                margin-top: 15vh;
            }

            .calculator {
                padding: 15px;
            }

            button {
                width: 100%;
            }
        }
        
        
        /* Footer */
#site-footer {
    text-align: center;
    padding: 0.625rem;
    position: relative;
    bottom: 0;
    width: 100%;
    background: linear-gradient(to bottom, #000, #000); /* Schwarz zu Schwarz */
    color: #fff; /* Wei√üe Schrift */
}

/* Footer-Link f√ºr das Impressum */
.footer-link {
    color: #fff; /* Wei√üe Schrift wie der Rest des Footers */
    text-decoration: none; /* Entfernt die Unterstreichung */
    font-family: 'Montserrat', sans-serif; /* Einheitliche Schriftart */
    transition: color 0.3s ease; /* Smooth transition for color */
}

.footer-link:hover {
    color: #ff9500; /* Farbe √§ndert sich beim Hover in Orange */
}
.highlight {
    background-color: #fff;  /* Wei√üer Kasten */
    color: #000;  /* Schwarze Schrift */
    padding: 0.125rem 0.25rem;  /* Etwas Innenabstand f√ºr den Kasten */
    border-radius: 3px;  /* Abgerundete Ecken f√ºr einen eleganten Look */
    font-weight: bold;  /* Optional: Mach den Text fett */
}

              footer {
    text-align: center;
    padding: 0.625rem;
    position: relative;
    bottom: 0;
    width: 100%;
    background: linear-gradient(to bottom, #000, #000); /* Farbverlauf im Footer von Schwarz zu Blau */
    color: #fff;
}

    </style>
</head>
<body>

    <!-- Zone 1 (Logo) -->
    <div class="zone-1">
        <div class="logo-container">
            <a href="https://www.leowangsound.de">
                <img class="logo" src="https://github.com/leowangsound/leowangsound.github.io/blob/main/LOGO%20v4.png?raw=true" alt="Logo">
            </a>
        </div>
    </div>

    <h1>Pricing Calculator</h1>
    <div class="calculator">
        <label for="projectType">Projecttype:</label>
        <select id="projectType" onchange="updateForm()">
            <option value="">-- Choose a projecttype --</option>
            <option value="dreh">On Set</option>
            <option value="postproduktion">Postproduction</option>
        </select>

        <!-- Preis-Kategorie -->
        <div id="priceCategoryDiv" style="display:none;">
            <label for="priceCategory">Price-Category:</label>
            <select id="priceCategory" onchange="updatePriceCategory()">
                <option value="">-- Choose a Price-Category --</option>
                <option value="<1,2 Mio.">TC-Movie and -series, Documentary, Low-Budget Feature Film (< 1,2 Mio. ‚Ç¨)</option>
                <option value=">1,2 Mio.">Featurefilm & Series (> 1,2 Mio. ‚Ç¨)</option>
                <option value="Werbung">Advertisement</option>
                <option value="podcast">Podcast</option>
            </select>
        </div>

  <!-- Podcast-Typ Auswahl -->
<div id="podcastTypeDiv" style="display:none;">
    <label for="podcastType">Type of Podcast:</label>
    <select id="podcastType" onchange="updatePodcastType()">
        <option value="">-- Choose a Podcast Type --</option>
        <option value="unterhaltung">Conversational / Entertainment</option>
        <option value="storytelling">Storytelling / Narrative</option>
    </select>
</div>


        <!-- Rolle -->
        <div id="roleDiv" style="display:none;">
            <label for="role">Roles:</label>
            <select id="role">
                <option value="">-- Choose a role --</option>
            </select>
        </div>

        <!-- Format-Auswahl -->
        <div id="formatDiv" style="display:none;">
            <label for="format">Format:</label>
            <select id="format">
                <option value="">-- Choose a Format --</option>
                <option value="stereo">Stereo</option>
                <option value="surround">Surround 5.1</option>
            </select>
        </div>

        <!-- Projektl√§nge in Minuten -->
        <div id="minutesDiv" style="display:none;">
            <label for="minutes">Projectlength in minutes:</label>
            <input type="number" id="minutes" placeholder="Projectlength in minutes">
        </div>

        <!-- Anzahl der Tage -->
        <div id="daysDiv" style="display:none;">
            <label for="days">Number of Days:</label>
            <input type="number" id="days" placeholder="Number of workingdays">
        </div>

        <button onclick="calculate()">Calculate</button>
<button id="shareButton" onclick="shareCalculation()">Share Calculation</button>


        <div class="result" id="result"></div>
        <div class="parameters" id="parameters" style="display:none;"></div>
        <div class="breakdown" id="breakdown" style="display:none;"></div>
        <div id="additionalNote" style="display:none; margin-top: 20px; color: #ddd;"></div>
        <div id="additionalNote2" style="display:none; margin-top: 20px; color: #ddd;"></div>

    </div>

    <p style="text-align: center; margin-top: 20px;">
    The rates are based on the <a href="https://www.bvft.de/verguetungsempfehlung/" target="_blank" style="color: #C8D7D2; text-decoration: underline;">rate recommendations</a> of the <a href="https://www.bvft.de" target="_blank" style="color: #C8D7D2; text-decoration: underline;">German Association for Film Sound Professionals (bvft)</a>.
</p>


    <script>
    
    const priceCategoryMap = {
    '<1.2M': '<1,2 Mio.',
    '>1.2M': '>1,2 Mio.',
    'Commercial': 'Werbung',
    'podcast': 'podcast'
};


// Tarifdaten
const rates = {
    dreh: {
        'O-Tonmeister': {
            '<1,2 Mio.': 449,
            '>1,2 Mio.': 483,
            'Werbung': 553
        },
        'O-Tonassistent': {
            '<1,2 Mio.': 305,
            '>1,2 Mio.': 328,
            'Werbung': 375
        },
        'equipmentFee': 150
    },
    postproduktion: {
        'Sound Design': {
            'rates': {
                '<1,2 Mio.': 449,
                '>1,2 Mio.': 483,
                'Werbung': 553,
                'podcast': 350 // F√ºgen Sie hier den korrekten Satz ein
            },
            'productivity': {
                '<1,2 Mio.': 10,
                '>1,2 Mio.': 10,
                'Werbung': 10,
                'Storytelling Podcast': 20
            }
        },
        'Dialog Edit': {
            'rates': {
                '<1,2 Mio.': 367,
                '>1,2 Mio.': 394,
                'Werbung': 451,
                'podcast': 300 // F√ºgen Sie hier den korrekten Satz ein
            },
            'productivity': {
                '<1,2 Mio.': 15,
                '>1,2 Mio.': 15,
                'Werbung': 30,
                'Unterhaltungspodcast': 120,
                'Storytelling Podcast': 90
            }
        },
        'Mischung': {
            'rates': {
                '<1,2 Mio.': 463,
                '>1,2 Mio.': 498,
                'Werbung': 569,
                'podcast': 350 // F√ºgen Sie hier den korrekten Satz ein
            },
            'productivity': {
                '<1,2 Mio.': 20,
                '>1,2 Mio.': 20,
                'Werbung': 30,
                'Storytelling Podcast': 45
            }
        },
        'Gesamtpaket Dialog Edit/Sound Design/Mischung': 'Gesamtpaket',
        'workplaceFee': {
            'stereo': 145,
            'surround': 195
        }
    }
};

let breakdownData = {};
let parametersData = {};

function updateForm() {
    const projectType = document.getElementById('projectType').value;
    const roleDiv = document.getElementById('roleDiv');
    const formatDiv = document.getElementById('formatDiv');
    const priceCategoryDiv = document.getElementById('priceCategoryDiv');
    const podcastTypeDiv = document.getElementById('podcastTypeDiv');
    const minutesDiv = document.getElementById('minutesDiv');
    const daysDiv = document.getElementById('daysDiv');
    const priceCategorySelect = document.getElementById('priceCategory');

    document.getElementById('breakdown').style.display = 'none';
    document.getElementById('result').innerText = '';
    document.getElementById('parameters').style.display = 'none';

    // Aktualisiere Preis-Kategorie Optionen basierend auf Projektart
priceCategorySelect.innerHTML = `
    <option value="">-- Choose a price category --</option>
    <option value="<1.2M">TV film & series, documentary, low-budget cinema (< ‚Ç¨1.2M)</option>
    <option value=">1.2M">Feature film, series & cinema (> ‚Ç¨1.2M)</option>
    <option value="Commercial">Commercial</option>
`;
    if (projectType === 'postproduktion') {
        priceCategorySelect.innerHTML += `<option value="podcast">Podcast</option>`;
    }

    if (projectType === 'postproduktion') {
        priceCategoryDiv.style.display = 'block';
        roleDiv.style.display = 'block';
        formatDiv.style.display = 'block';
        minutesDiv.style.display = 'block';
        daysDiv.style.display = 'none';
        podcastTypeDiv.style.display = 'none';

        updateRoles();

    } else if (projectType === 'dreh') {
        priceCategoryDiv.style.display = 'block';
        roleDiv.style.display = 'block';
        formatDiv.style.display = 'none'; // Format ausblenden
        minutesDiv.style.display = 'none';
        daysDiv.style.display = 'block';
        podcastTypeDiv.style.display = 'none';

        updateRoles();

    } else {
        priceCategoryDiv.style.display = 'none';
        roleDiv.style.display = 'none';
        formatDiv.style.display = 'none';
        minutesDiv.style.display = 'none';
        daysDiv.style.display = 'none';
        podcastTypeDiv.style.display = 'none';
    }
}

function updatePriceCategory() {
    const priceCategory = document.getElementById('priceCategory').value;
    const mappedPriceCategory = priceCategoryMap[priceCategory];
    const projectType = document.getElementById('projectType').value;
    const podcastTypeDiv = document.getElementById('podcastTypeDiv');
    const formatDiv = document.getElementById('formatDiv');
    const roleDiv = document.getElementById('roleDiv');
    const roleSelect = document.getElementById('role');

    // üëâ Automatische Weiterleitung zum Konfigurator
    if (projectType === 'postproduktion' && priceCategory === 'podcast') {
        window.location.href = 'https://leowangsound.de/podcast-configurator';
        return;
    }

    podcastTypeDiv.style.display = (priceCategory === 'podcast') ? 'block' : 'none';

    if (priceCategory === 'podcast') {
        formatDiv.style.display = 'none';
        roleDiv.style.display = 'block';
    } else {
        formatDiv.style.display = 'block';
        roleDiv.style.display = 'block';
    }

    updateRoles();
}


function updatePodcastType() {
    const podcastType = document.getElementById('podcastType').value;
    const roleDiv = document.getElementById('roleDiv');
    const roleSelect = document.getElementById('role');
    const formatDiv = document.getElementById('formatDiv');

    if (podcastType === 'unterhaltung') {
        roleDiv.style.display = 'none';
        roleSelect.innerHTML = '';
        const option = document.createElement('option');
        option.value = 'Dialog Edit';
        option.text = 'Dialog Edit';
        roleSelect.add(option);
    } else if (podcastType === 'storytelling') {
        roleDiv.style.display = 'none';
        formatDiv.style.display = 'none';
        roleSelect.innerHTML = '';
        // Markieren, dass mehrere Rollen ausgew√§hlt werden sollen
        roleSelect.value = 'storytelling';
    } else {
        roleDiv.style.display = 'block';
    }
}

function updateRoles() {
    const projectType = document.getElementById('projectType').value;
    const priceCategory = document.getElementById('priceCategory').value;
    const mappedPriceCategory = priceCategoryMap[priceCategory];
    const roleSelect = document.getElementById('role');
    const roleDiv = document.getElementById('roleDiv');
    const podcastTypeDiv = document.getElementById('podcastTypeDiv');
    const formatDiv = document.getElementById('formatDiv');

    roleSelect.innerHTML = '<option value="">-- W√§hle eine Rolle --</option>';

    if (projectType === 'postproduktion') {
        if (priceCategory === 'podcast') {
            formatDiv.style.display = 'none';
        } else {
            formatDiv.style.display = 'block';
        }
        podcastTypeDiv.style.display = priceCategory === 'podcast' ? 'block' : 'none';

const roleLabelMap = {
    'O-Tonmeister': 'Sound Mixer',
    'O-Tonassistent': 'Sound Assistant',
    'Sound Design': 'Sound Design',
    'Dialog Edit': 'Dialogue Editing',
    'Mischung': 'Mixing',
    'Gesamtpaket Dialog Edit/Sound Design/Mischung': 'Full Package'
};

const roles = Object.keys(rates[projectType]);
roles.forEach(role => {
    if (!['equipmentFee', 'workplaceFee'].includes(role)) {
        const option = document.createElement('option');
        option.value = role; // Der technische Schl√ºssel bleibt deutsch!
        option.text = roleLabelMap[role] || role; // Die Anzeige ist englisch
        roleSelect.add(option);
    }
});


        // Wenn "Dialog Edit" oder "Gesamtpaket" ausgew√§hlt wird
        roleSelect.onchange = function() {
            const selectedRole = roleSelect.value;
            if (selectedRole === 'Dialog Edit') {
                formatDiv.style.display = 'none';
            } else if (selectedRole === 'Gesamtpaket Dialog Edit/Sound Design/Mischung') {
                formatDiv.style.display = 'block';
            } else {
                formatDiv.style.display = 'block';
            }
        };

    } else if (projectType === 'dreh') {
        roleDiv.style.display = 'block';
        podcastTypeDiv.style.display = 'none';
        formatDiv.style.display = 'none';

        roleSelect.innerHTML = '<option value="">-- W√§hle eine Rolle --</option>';
        const roleLabelMap = {
            'O-Tonmeister': 'Sound Mixer',
            'O-Tonassistent': 'Sound Assistant'
        };

        const roles = Object.keys(rates[projectType]);
        roles.forEach(role => {
            if (!['equipmentFee'].includes(role)) {
                const option = document.createElement('option');
                option.value = role;
                option.text = roleLabelMap[role] || role;
                roleSelect.add(option);
            }
        });


        roleSelect.onchange = function() {
            formatDiv.style.display = 'none';
        }
    }
}

function calculate() {
    const projectType = document.getElementById('projectType').value;
    const priceCategory = document.getElementById('priceCategory').value;
    const mappedPriceCategory = priceCategoryMap[priceCategory];
    let total = 0;
    breakdownData = {};
    parametersData = {};

    document.getElementById('breakdown').style.display = 'none';
    document.getElementById('breakdown').innerHTML = '';
    document.getElementById('parameters').style.display = 'none';
    document.getElementById('parameters').innerHTML = '';
    document.getElementById('result').innerText = '';

    // Zus√§tzliche Hinweise ausblenden
    document.getElementById('additionalNote').style.display = 'none';
    document.getElementById('additionalNote2').style.display = 'none';

    if (projectType === 'postproduktion') {
        const minutes = parseFloat(document.getElementById('minutes').value);

        if (!minutes || !priceCategory) {
            document.getElementById('result').innerText = 'Please fill out all fields!';
            return;
        }

        let roles = [];
        let format = 'stereo'; // Standardm√§√üig Stereo

        if (priceCategory === 'podcast') {
            const podcastType = document.getElementById('podcastType').value;
            if (!podcastType) {
                document.getElementById('result').innerText = 'Please fill out all fields!';
                return;
            }

            if (podcastType === 'unterhaltung') {
                roles = ['Dialog Edit'];
            } else if (podcastType === 'storytelling') {
                roles = ['Dialog Edit', 'Sound Design', 'Mischung'];
            } else {
                document.getElementById('result').innerText = 'Unbekannter Podcasttyp!';
                return;
            }
        } else {
            const role = document.getElementById('role').value;
            format = document.getElementById('format').value;

            if (!role || (!format && role !== 'Dialog Edit')) {
                document.getElementById('result').innerText = 'Please fill out all fields!';
                return;
            }

            if (role === 'Gesamtpaket Dialog Edit/Sound Design/Mischung') {
                roles = ['Dialog Edit', 'Sound Design', 'Mischung'];
            } else {
                roles = [role];
            }
        }

        let totalCost = 0;
        let totalDays = 0;
        let productivityValues = {};
        let rateValues = {};
        let ratePerHourValues = {};
        let totalWorkplaceDaysStereo = 0;
        let totalWorkplaceDaysSurround = 0;

        for (let role of roles) {
            const rateData = rates[projectType][role];
const rate = rateData['rates'][mappedPriceCategory];
            let productivityKey = priceCategory;

            if (priceCategory === 'podcast') {
                const podcastType = document.getElementById('podcastType').value;
                if (podcastType === 'unterhaltung') {
                    productivityKey = 'Unterhaltungspodcast';
                } else if (podcastType === 'storytelling') {
                    productivityKey = 'Storytelling Podcast';
                }
            }

let productivity = rateData['productivity'][mappedPriceCategory];


            if (!productivity) {
                document.getElementById('result').innerText = `${role} ist f√ºr diese Preis-Kategorie nicht vorgesehen.`;
                return;
            }

            const days = minutes / productivity;

            breakdownData[role] = {
                rate: rate,
                days: days,
                cost: rate * days,
                productivity: productivity
            };

            totalDays += days;
            productivityValues[role] = productivity;
            rateValues[role] = rate;
            ratePerHourValues[role] = (rate / 10).toFixed(2);

            // Anpassung der Arbeitsplatzpauschale basierend auf dem Format
            let roleFormat = format;
            if (role === 'Dialog Edit') {
                roleFormat = 'stereo';
                totalWorkplaceDaysStereo += days;
            } else {
                if (format === 'stereo') {
                    totalWorkplaceDaysStereo += days;
                } else if (format === 'surround') {
                    totalWorkplaceDaysSurround += days;
                }
            }

            totalCost += breakdownData[role].cost;
        }

        // Gesamtarbeitsplatzpauschale berechnen
        const workplaceFeeStereo = rates[projectType]['workplaceFee']['stereo'];
        const workplaceFeeSurround = rates[projectType]['workplaceFee']['surround'];

        if (totalWorkplaceDaysStereo > 0) {
            breakdownData[`Arbeitsplatzpauschale Stereo`] = {
                rate: workplaceFeeStereo,
                days: totalWorkplaceDaysStereo,
                cost: workplaceFeeStereo * totalWorkplaceDaysStereo
            };
            totalCost += breakdownData[`Arbeitsplatzpauschale Stereo`].cost;
        }

        if (totalWorkplaceDaysSurround > 0) {
            breakdownData[`Arbeitsplatzpauschale Surround 5.1`] = {
                rate: workplaceFeeSurround,
                days: totalWorkplaceDaysSurround,
                cost: workplaceFeeSurround * totalWorkplaceDaysSurround
            };
            totalCost += breakdownData[`Arbeitsplatzpauschale Surround 5.1`].cost;
        }

        total = totalCost;

        // Anpassung der Anzeige f√ºr ben√∂tigte Tage oder Stunden
        let timeKey, timeValue;
        let totalHours = totalDays * 10; // 1 Tag = 10 Stunden

        if (totalHours >= 10) {
            timeKey = 'Anzahl der ben√∂tigten Tage';
            timeValue = `${totalDays.toFixed(2)} Tage`;
        } else {
            timeKey = 'Anzahl der ben√∂tigten Stunden';
            timeValue = `${totalHours.toFixed(2)} Stunden`;
        }

        parametersData = {
            'Rolle(n)': roles.join(', '),
            'Projektl√§nge': `${minutes} Minuten`,
            [timeKey]: timeValue
        };

        roles.forEach(role => {
            let days = breakdownData[role].days;
            let rate = rateValues[role];
            let productivity = productivityValues[role];

            if (days * 10 >= 10) {
                parametersData[`Produktivit√§t ${role}`] = `${productivity} Minuten/Tag`;
                parametersData[`Tagessatz ${role}`] = `${rate} ‚Ç¨`;
            } else {
                parametersData[`Produktivit√§t ${role}`] = `${(productivity / 10).toFixed(2)} Minuten/Stunde`;
                parametersData[`Stundensatz ${role}`] = `${ratePerHourValues[role]} ‚Ç¨`;
            }
        });

        generateBreakdown();

    } else if (projectType === 'dreh') {
        // Berechnung f√ºr Dreh
        const role = document.getElementById('role').value;
        const days = parseFloat(document.getElementById('days').value);

        if (!role || !days || !priceCategory) {
            document.getElementById('result').innerText = 'Bitte alle Felder ausf√ºllen!';
            return;
        }

        const rate = rates[projectType][role][priceCategory];
        const equipmentFee = rates[projectType]['equipmentFee'];

        breakdownData[role] = {
            rate: rate,
            days: days,
            cost: rate * days
        };

        if (role !== 'O-Tonassistent') {
            breakdownData['Technikpauschale'] = {
                rate: equipmentFee,
                days: days,
                cost: equipmentFee * days
            };
            total = breakdownData[role].cost + breakdownData['Technikpauschale'].cost;
        } else {
            total = breakdownData[role].cost;
        }

        // Anpassung der Anzeige f√ºr ben√∂tigte Tage oder Stunden
        let timeKey, timeValue;
        let totalHours = days * 10;

        if (totalHours >= 10) {
            timeKey = 'Anzahl der ben√∂tigten Tage';
            timeValue = `${days.toFixed(2)} Tage`;
        } else {
            timeKey = 'Anzahl der ben√∂tigten Stunden';
            timeValue = `${(days * 10).toFixed(2)} Stunden`;
        }

        // Parameterdaten
        parametersData = {
            'Rolle': role,
            [timeKey]: timeValue,
        };

        if (totalHours >= 10) {
            parametersData['Tagessatz'] = `${rate} ‚Ç¨`;
        } else {
            parametersData['Stundensatz'] = `${(rate / 10).toFixed(2)} ‚Ç¨`;
        }

        if (role !== 'O-Tonassistent') {
            parametersData['Technikpauschale'] = `${equipmentFee} ‚Ç¨ pro Tag`;
        }

        generateBreakdown();

        // Zus√§tzliche Hinweise
        if (role === 'O-Tonmeister') {
            // Hinweis f√ºr Technikpauschale
            const additionalNote = "Die Technikpauschale beinhaltet die Ausstattung f√ºr maximal 3 Sprechrollen pro Einstellung. F√ºr gr√∂√üere Setups wird zus√§tzliches Equipment ben√∂tigt, was den Gesamtpreis entsprechend beeinflusst.";
            document.getElementById('additionalNote').innerText = additionalNote;
            document.getElementById('additionalNote').style.display = 'block';
        }

        if (priceCategory === '>1,2 Mio.' && role === 'O-Tonmeister') {
            // Pers√∂nlicher Hinweis
            const note = "Ich stehe Ihnen gerne f√ºr Anfragen zur Verf√ºgung, w√ºrde in diesem Fall aber wahrscheinlich auf erfahrenere Kolleg*innen verweisen. Gerne helfe ich bei der Vermittlung und stehe gegebenenfalls als Assistent zur Verf√ºgung, da meine Hauptexpertise eher in der Postproduktion liegt und ich O-Ton haupts√§chlich f√ºr kleinere Sets anbiete. Ausnahmen sind nat√ºrlich m√∂glich und ergeben sich dann im Gespr√§ch.";
            document.getElementById('additionalNote2').innerText = note;
            document.getElementById('additionalNote2').style.display = 'block';
        }

    } else {
        document.getElementById('result').innerText = 'Please select a valid project type!';
        return;
    }

    document.getElementById('result').innerText = `Gesamtgage: ${total.toFixed(2)} ‚Ç¨`;
    document.getElementById('breakdown').style.display = 'block';
    document.getElementById('parameters').style.display = 'block';
}



function generateBreakdown() {
    // Parameterdaten in einer Tabelle anzeigen
    let parametersHTML = `<strong>Parameter:</strong><br><table>`;
    for (let key in parametersData) {
        parametersHTML += `
            <tr>
                <td><strong>${key}</strong></td>
                <td>${parametersData[key]}</td>
            </tr>
        `;
    }
    parametersHTML += `</table>`;
    document.getElementById('parameters').innerHTML = parametersHTML;

    // Breakdown-Daten anzeigen
    let breakdownHTML = `<strong>Berechnung:</strong><br><table>`;
    for (let key in breakdownData) {
        const item = breakdownData[key];
        let timeUnit = 'Tage';
        let timeValue = item.days;

        if (item.days < 0.1) {
            timeUnit = 'Stunden';
            timeValue = item.days * 10; // 1 Tag = 10 Stunden
        }

        breakdownHTML += `
            <tr>
                <td>${key}</td>
                <td><input type="number" class="editable" data-key="${key}" value="${timeValue.toFixed(2)}" onchange="updateItem(this)"> ${timeUnit}</td>
                <td>@ ${item.rate.toFixed(2)} ‚Ç¨</td>
                <td>= ${(item.cost).toFixed(2)} ‚Ç¨</td>
            </tr>
        `;
    }
    breakdownHTML += `</table>`;
    document.getElementById('breakdown').innerHTML = breakdownHTML;
}

function updateItem(element) {
    const key = element.getAttribute('data-key');
    let newValue = parseFloat(element.value);
    let timeUnit = 'Tage';

    if (newValue < 1) {
        timeUnit = 'Stunden';
        newValue = newValue / 10; // Stunden zu Tagen umrechnen
    }

    breakdownData[key].days = newValue;
    breakdownData[key].cost = breakdownData[key].rate * newValue;

    // Gesamtbetrag neu berechnen
    let total = Object.values(breakdownData).reduce((sum, item) => sum + item.cost, 0);
    document.getElementById('result').innerText = `Gesamtgage: ${total.toFixed(2)} ‚Ç¨`;

    // Parameterdaten aktualisieren
    let totalDays = 0;
    for (let key in breakdownData) {
        totalDays += breakdownData[key].days;
    }

    let timeKey, timeValue;
    let totalHours = totalDays * 10;

    if (totalHours >= 10) {
        timeKey = 'Anzahl der ben√∂tigten Tage';
        timeValue = `${totalDays.toFixed(2)} Tage`;
    } else {
        timeKey = 'Anzahl der ben√∂tigten Stunden';
        timeValue = `${totalHours.toFixed(2)} Stunden`;
    }

    parametersData[timeKey] = timeValue;

    // Alte Zeitangabe entfernen
    delete parametersData['Anzahl der ben√∂tigten Tage'];
    delete parametersData['Anzahl der ben√∂tigten Stunden'];

    // Parameteranzeige neu generieren
    generateBreakdown();
}

function updateItemPodcast(element) {
    // Wenn Anpassungen f√ºr Podcasts vorgenommen werden sollen, kann diese Funktion erweitert werden.
}

function shareCalculation() {
    // Aktuelle Einstellungen erfassen
    const projectType = document.getElementById('projectType').value;
    const priceCategory = document.getElementById('priceCategory').value;
    const role = document.getElementById('role').value;
    const format = document.getElementById('format').value;
    const minutes = document.getElementById('minutes').value;
    const days = document.getElementById('days').value;
    const podcastType = document.getElementById('podcastType').value;

    // Objekt mit den Einstellungen erstellen
    const settings = {
        projectType,
        priceCategory,
        role,
        format,
        minutes,
        days,
        podcastType
    };

    // Objekt in Query-Parameter umwandeln
    const params = new URLSearchParams();

    for (const key in settings) {
        if (settings[key]) {
            params.append(key, settings[key]);
        }
    }

    // Aktuelle URL ohne Parameter
    const baseUrl = window.location.origin + window.location.pathname;

    // Vollst√§ndige URL mit Parametern
    const shareUrl = `${baseUrl}?${params.toString()}`;

    // Link in die Zwischenablage kopieren
    navigator.clipboard.writeText(shareUrl).then(() => {
        const shareButton = document.getElementById('shareButton');
        shareButton.innerText = 'Link in die Zwischenablage kopiert';
        // Nach 3 Sekunden den Text zur√ºcksetzen
        setTimeout(() => {
            shareButton.innerText = 'Berechnung teilen';
        }, 3000);
    }).catch(err => {
        alert('Fehler beim Kopieren des Links: ' + err);
    });
}

window.onload = function() {
    // URL-Parameter auslesen
    const params = new URLSearchParams(window.location.search);

    const projectType = params.get('projectType');
    if (projectType) {
        document.getElementById('projectType').value = projectType;
        updateForm();

        const priceCategory = params.get('priceCategory');
        if (priceCategory) {
            document.getElementById('priceCategory').value = priceCategory;
            updatePriceCategory();

            const podcastType = params.get('podcastType');
            if (podcastType) {
                document.getElementById('podcastType').value = podcastType;
                updatePodcastType();
            }

            const role = params.get('role');
            if (role) {
                document.getElementById('role').value = role;
            }

            const format = params.get('format');
            if (format) {
                document.getElementById('format').value = format;
            }

            const minutes = params.get('minutes');
            if (minutes) {
                document.getElementById('minutes').value = minutes;
            }

            const days = params.get('days');
            if (days) {
                document.getElementById('days').value = days;
            }

            // Berechnung automatisch durchf√ºhren
            calculate();
        }
    }
};



</script>

<footer id="site-footer">
    &copy; 2025 Leo Wang Sound
    <p><a href="https://leowangsound.de/imprint" class="footer-link">Imprint</a></p>
     <p><a href="https://leowangsound.de/legal-notice" class="footer-link">Legal-Notice</a></p>
      <p><a href="https://leowangsound.de/en" class="footer-link">Back to Homepage</a></p>
</footer>

</body>
</html>
